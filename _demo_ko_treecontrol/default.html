<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Scope Selector Demo</title>
    <!-- first: stylesheet -->
    <link href="css/ss-demo.css" rel="stylesheet" />
    <!-- second: javascript libraries-->
    <script src="script/knockout-3.4.2.js" type="text/javascript"></script>
    <!-- third: json data-->
    <script src="js/ss-ko-data.js" type="text/javascript"></script>
    <!-- forth: knockout.js viewmodels -->
    <script src="js/ss-ko-vm-node.js" type="text/javascript"></script>
    <script src="js/ss-ko-vm-tree.js" type="text/javascript"></script>
    <script src="js/ss-ko-vm-main.js" type="text/javascript"></script>
    <!-- fifth: "main" methos -->
    <script src="js/ss-main.js" type="text/javascript"></script>
</head>
<body>
    <div class="DebugPanel" data-bind="visible: DEBUGFLAG">
        <span class="bolded">DEBUGFLAG: </span><span data-bind="text: DEBUGFLAG"></span>
        <span class="bolded">ID: </span><span data-bind="text: ID"></span>
        <span class="bolded">Title: </span><span data-bind="text: Title"></span>
    </div>

    <!-- treeview demo -->
    <div class="ScopeSelectLayout">
        <div class="TitleLabel">Select scope</div>
        <div class="SelectedCount">
            <div data-bind="visible: $root.DEBUGFLAG, text: SelectedNodesCount"></div>
            <span data-bind="text: SelectedNodesCountText"></span>
        </div>
        <div class="SearchBar">
            <input class="SearchInput" type="text" placeholder="Find scoped policies" data-bind="textinput: SearchBoxValue, event: { keypress: SortNodesCollection }, keypressBubble: false"/>
        </div>
    
        <div class="ScopeSelectorMainPanel" data-bind="template: { foreach: DefaultNodeCollection, name: 'KO-Node-Template'}"></div>
    
        <div class="ButtonsPanel">
            <button class="ss_btn" value="Save" data-bind="click: Click_SaveButton">Save</button>
            <button class="ss_btn" value="Cancel"  data-bind="click: Click_CancelButton">Cancel</button>
        </div>
    </div>

    <!-- node template -->
    <script type="text/html" id="KO-Node-Template">
        <div class="NodePanel">
            <div class="Node" data-bind="attr: { id: ID }, css: { 'NodeChecked' : IsChecked }">
                <img data-bind="css: { 'NodeOpenCloseImage': HasNodesCollection, 'HideNodeIcon' : NodeStateImageDisplayed },
                    attr: { src: NodeStateImage }, click: ShowHide_ChildCollection, clickBubble: false" />
			    <label data-bind="attr: { for: CheckBoxId,  title: TitleText }, event: { change: CheckThisItem, click: HandleClickChangeEvent }, 
                    changeBubble:false, clickBubble: false">
				    <input type="checkbox" data-bind="visible: ShowCheckBox, checked: IsCheckedAttribute, attr: { id: CheckBoxId, checked: IsChecked }" />
				    <img class="NodeSvgIcon" data-bind="attr: { src: IconValue}" />
				    <span data-bind="text: DisplayText"></span>
                    <span class="bolded" data-bind="visible: $root.DEBUGFLAG, text: IsChecked"></span>
			    </label>
            </div>
            <div class="NodeCollectionPanel" data-bind="visible: ShowNodeCollection, 
            attr: { id: NodesCollectionID }, 
            css: { 'NodeCollectionPanelChecked' : IsChecked },
            template: { foreach: NodesCollection, name: 'KO-Node-Template'}"></div>
        </div>
    </script>

</body>
</html>
